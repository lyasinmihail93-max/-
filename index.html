<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–°–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ª–µ—Ç –æ—Å—Ç–∞–ª–æ—Å—å</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 600px; margin: 40px auto; padding: 0 20px;
      color: #2c3a47; text-align: center;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9f2fc 100%);
    }
    h1 {
      font-size: 28px;
      color: #1a5276;
      margin-bottom: 8px;
    }
    .subtitle {
      color: #7f8c8d;
      margin-bottom: 25px;
      font-size: 16px;
    }
    .input-group {
      background: rgba(255, 255, 255, 0.94);
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      margin-bottom: 25px;
    }
    label {
      display: block;
      margin: 12px 0 6px;
      font-weight: 500;
    }
    input {
      padding: 10px;
      font-size: 18px;
      border: 2px solid #3498db;
      border-radius: 6px;
      margin: 5px;
      width: 140px;
      text-align: center;
    }
    button {
      background: #2980b9;
      color: white;
      border: none;
      padding: 12px 30px;
      font-size: 18px;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 10px;
      transition: background 0.3s;
    }
    button:hover {
      background: #1a5276;
    }
    .result {
      background: rgba(255, 255, 255, 0.94);
      border-radius: 10px;
      padding: 25px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      display: none;
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .result.show {
      display: block;
      opacity: 1;
      transform: translateY(0);
    }
    .value {
      font-weight: bold;
      color: #2c3e50;
      font-size: 20px;
    }
    .total {
      margin-top: 20px;
      padding: 15px;
      background: #e3f2fd;
      border-left: 4px solid #3498db;
      font-size: 20px;
    }
    .highlight {
      color: #c0392b;
    }
    hr { border: 0; border-top: 1px dashed #bdc3c7; margin: 15px 0; }

    /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.92);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      position: relative;
      width: 95%; max-width: 800px;
      background: #000;
      border-radius: 12px;
      overflow: hidden;
    }
    .close-btn {
      position: absolute; top: 16px; right: 20px;
      font-size: 32px; color: white; cursor: pointer;
      z-index: 10;
      text-shadow: 0 1px 3px rgba(0,0,0,0.8);
    }
    video {
      width: 100%; display: block;
    }
    .modal-message {
      padding: 16px; text-align: center;
      color: #fff; font-size: 18px;
      background: rgba(0,0,0,0.7);
    }
    #unmuteBtn {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 2000;
      display: none;
    }
    #unmuteBtn button {
      padding: 10px 16px;
      font-size: 16px;
      background: #e74c3c;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1>‚è≥ –°–∫–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ª–µ—Ç –æ—Å—Ç–∞–ª–æ—Å—å</h1>
  <p class="subtitle">–†–í + CB = –≤–∞—à–∞ —ç–Ω–µ—Ä–≥–∏—è –¥–ª—è —Ü–µ–ª–µ–π, –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –∂–∏–∑–Ω–∏</p>

  <div class="input-group">
    <label>–í–∞—à –≤–æ–∑—Ä–∞—Å—Ç (–ª–µ—Ç):</label>
    <input type="number" id="age" min="18" max="100" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 32">

    <label>–í–æ–∑—Ä–∞—Å—Ç –≤—ã—Ö–æ–¥–∞ –Ω–∞ –ø–µ–Ω—Å–∏—é:</label>
    <input type="number" id="retirement" min="50" max="75" value="65" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä, 65">

    <br>
    <button onclick="calculate()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å</button>
  </div>

  <div id="result" class="result">
    <p>–î–æ –ø–µ–Ω—Å–∏–∏ –æ—Å—Ç–∞–ª–æ—Å—å: <span id="yearsLeft" class="value">‚Äî</span> –ª–µ—Ç</p>
    <hr>
    <p><strong>–†–∞–±–æ—á–µ–µ –≤—Ä–µ–º—è (–†–í)</strong>:<br>
       <span id="rvHours" class="value">‚Äî</span> —á–∞—Å–æ–≤</p>
    
    <p><strong>–°–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è (CB)</strong>:<br>
       <span id="cbHours" class="value">‚Äî</span> —á–∞—Å–æ–≤</p>
    <ul style="text-align: left; margin: 10px 0 0 25px; font-size: 15px;">
      <li>C1 ‚Äî –±—É–¥–Ω–∏ (3 —á/–¥–µ–Ω—å): <span id="c1Hours">‚Äî</span> —á</li>
      <li>C2 ‚Äî –≤—ã—Ö–æ–¥–Ω—ã–µ (12 —á/–¥–µ–Ω—å): <span id="c2Hours">‚Äî</span> —á</li>
    </ul>

    <div class="total">
      üéØ <strong>–û–±—â–∏–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–µ–∑–µ—Ä–≤ (–†–í + CB)</strong>:<br>
      <span id="totalHours" class="value highlight">‚Äî</span> —á–∞—Å–æ–≤
    </div>

    <p style="margin-top: 20px; font-style: italic; color: #555;">
      –≠—Ç–æ –≤–∞—à–∞ —ç–Ω–µ—Ä–≥–∏—è, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏ –≤—Ä–µ–º—è –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å—ë, —á—Ç–æ –≤—ã –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª–∏!
    </p>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –≤–∏–¥–µ–æ -->
  <div id="videoModal" class="modal">
    <div class="modal-content">
      <span class="close-btn" onclick="closeModal()">&times;</span>
      <video id="localVideo" playsinline>
        <source src="motivation.mp4" type="video/mp4">
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
      </video>
      <div class="modal-message">
        ‚ö†Ô∏è –£ –≤–∞—Å –æ—Å—Ç–∞–ª–æ—Å—å –º–µ–Ω–µ–µ 50 000 —á–∞—Å–æ–≤ ‚Äî –≤—Ä–µ–º—è –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å!
      </div>
    </div>
  </div>

  <!-- –ö–Ω–æ–ø–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è –∑–≤—É–∫–∞ (–µ—Å–ª–∏ –∞–≤—Ç–æ–ø–ª–µ–π –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω) -->
  <div id="unmuteBtn">
    <button onclick="unmuteVideo()">üîä –í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫</button>
  </div>

  <script>
    function calculate() {
      const age = Number(document.getElementById('age').value);
      const retirement = Number(document.getElementById('retirement').value);

      if (isNaN(age) || isNaN(retirement)) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –æ–±–∞ –∑–Ω–∞—á–µ–Ω–∏—è');
        return;
      }
      if (age < 0 || retirement < age) {
        alert('–í–æ–∑—Ä–∞—Å—Ç –≤—ã—Ö–æ–¥–∞ –Ω–∞ –ø–µ–Ω—Å–∏—é –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ‚â• —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞');
        return;
      }

      const A = retirement - age;
      const RV = A * 1760;     // 220 * 8
      const C1 = A * 660;      // 220 * 3
      const C2 = A * 1740;     // 145 * 12
      const CB = C1 + C2;
      const total = RV + CB;

      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
      document.getElementById('yearsLeft').textContent = A;
      document.getElementById('rvHours').textContent = RV.toLocaleString('ru');
      document.getElementById('c1Hours').textContent = C1.toLocaleString('ru');
      document.getElementById('c2Hours').textContent = C2.toLocaleString('ru');
      document.getElementById('cbHours').textContent = CB.toLocaleString('ru');
      document.getElementById('totalHours').textContent = total.toLocaleString('ru');

      // –ê–Ω–∏–º–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
      const resultDiv = document.getElementById('result');
      resultDiv.classList.remove('show');
      void resultDiv.offsetWidth;
      resultDiv.classList.add('show');

      // üîî –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –æ—Å—Ç–∞—Ç–æ–∫
      if (total < 50000) {
        showVideo();
      } else {
        closeModal();
      }
    }

    function showVideo() {
      const video = document.getElementById('localVideo');
      const modal = document.getElementById('videoModal');

      video.currentTime = 0;
      video.muted = false;
      video.volume = 0.8;

      // –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–æ–∏–≥—Ä–∞—Ç—å —Å–æ –∑–≤—É–∫–æ–º (–ø–æ—Å–ª–µ user gesture ‚Äî —Ä–∞–∑—Ä–µ—à–µ–Ω–æ)
      video.play()
        .then(() => {
          console.log("–í–∏–¥–µ–æ –∑–∞–ø—É—â–µ–Ω–æ —Å–æ –∑–≤—É–∫–æ–º");
          document.getElementById('unmuteBtn').style.display = 'none';
        })
        .catch(e => {
          console.warn("–ê–≤—Ç–æ–ø–ª–µ–π —Å–æ –∑–≤—É–∫–æ–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω:", e);
          document.getElementById('unmuteBtn').style.display = 'block';
        });

      modal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      const modal = document.getElementById('videoModal');
      const video = document.getElementById('localVideo');
      
      modal.style.display = 'none';
      video.pause();
      document.body.style.overflow = '';
    }

    function unmuteVideo() {
      const video = document.getElementById('localVideo');
      video.muted = false;
      video.volume = 0.8;
      video.play().catch(e => console.error("–ù–µ —É–¥–∞–ª–æ—Å—å –≤–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫:", e));
      document.getElementById('unmuteBtn').style.display = 'none';
    }

    // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ ESC
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape') closeModal();
    });
  </script>

</body>
</html>
